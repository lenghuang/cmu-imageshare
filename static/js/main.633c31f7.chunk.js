(this.webpackJsonpimages=this.webpackJsonpimages||[]).push([[0],{14:function(e,a,t){},36:function(e,a,t){e.exports=t.p+"static/media/s20_logo.8861a56c.png"},42:function(e,a,t){e.exports=t(64)},47:function(e,a,t){},64:function(e,a,t){"use strict";t.r(a);t(20);var n=t(0),o=t.n(n),l=t(16),r=t.n(l),s=(t(47),t(14),t(24));t(65),t(48);s.initializeApp({apiKey:"AIzaSyCvzTRIbsUGn5LswZjEQ3S5q0n0-syCL_s",authDomain:"sushi-7c58c.firebaseapp.com",databaseURL:"https://sushi-7c58c.firebaseio.com/",projectId:"sushi-7c58c",storageBucket:"sushi-7c58c.appspot.com",messagingSenderId:"723643017410",appId:"1:723643017410:web:197eda27b80544d40a335b"});var i=s,c=[],u=[{original:"https://firebasestorage.googleapis.com/v0/b/sushi-7c58c.appspot.com/o/default%2Fdefault.png?alt=media&token=a6fba805-0145-44df-ad06-c011f1eaec04",thumbnail:"https://firebasestorage.googleapis.com/v0/b/sushi-7c58c.appspot.com/o/default%2Fdefault.png?alt=media&token=a6fba805-0145-44df-ad06-c011f1eaec04"}];function m(e){var a=e.original;console.log(!c.includes(a)),console.log(function(e){var a=new Image;return a.src=e,console.log(a),0!==a.height}(a)),c.includes(a)?(console.log("REJECTED: "),console.log(e)):(c.push(a),u.splice(1,0,e),console.log("PUSHED:"),console.log(e))}function h(e){for(var a=e.val(),t=Object.keys(a),n=0;n<t.length;n++){var o=a[t[n]];m({original:o.imageURL,thumbnail:o.imageURL,description:o.caption,thumbnailLabel:o.person})}}function p(e){console.log(e)}var d=function(){return console.log("BEFORE"),console.log(u),i.database().ref("images").on("value",h,p),console.log("AFTER"),console.log(u),u},g=t(29),E=t.n(g);var f=function(){return o.a.createElement("div",{style:{}},o.a.createElement(E.a,{items:d(),showFullscreenButton:!1,showPlayButton:!0,autoPlay:!1,infinite:!0}))},v=t(30),b=t(31),w=t(9),C=t(38),S=t(40),U=t(68),y=t(34),I=t(35),N=t(7),P=t(11),T=function(e){Object(S.a)(t,e);var a=Object(C.a)(t);function t(){var e;return Object(v.a)(this,t),(e=a.call(this)).handleUpload=function(){var a=e.state.image;(null===a&&e.setState({showUploadError:!0}),""===e.state.inputCaption&&""===e.state.inputPerson)?e.setState({showInputError:!0}):(e.setState({showUploadSuccess:!0}),i.storage().ref().child("images/".concat(e.state.inputPerson.replace(/[^a-zA-Z ]/g,"")+"_"+e.state.inputCaption.replace(/[^a-zA-Z ]/g,""))).put(a).on("state_changed",(function(e){console.log(e)}),(function(a){console.log(a),e.setState({showServerError:!0})}),(function(){i.storage().ref().child("images/".concat(e.state.inputPerson.replace(/[^a-zA-Z ]/g,"")+"_"+e.state.inputCaption.replace(/[^a-zA-Z ]/g,""))).getDownloadURL().then((function(a){console.log(a),console.log(e.state.inputCaption);var t={imageURL:a,caption:e.state.inputCaption,person:e.state.inputPerson};i.database().ref("images").push(t)}))})))},e.state={image:null,fileText:"Find an image...",inputCaption:"",inputPerson:"",showUploadError:!1,showUploadSuccess:!1,showInputError:!1,showServerError:!1},e.handleFileChange=e.handleFileChange.bind(Object(w.a)(e)),e.handleCapChange=e.handleCapChange.bind(Object(w.a)(e)),e.handlePplChange=e.handlePplChange.bind(Object(w.a)(e)),e.handleUpload=e.handleUpload.bind(Object(w.a)(e)),e}return Object(b.a)(t,[{key:"handleCapChange",value:function(e){this.setState({inputCaption:e.target.value})}},{key:"handlePplChange",value:function(e){this.setState({inputPerson:e.target.value})}},{key:"handleFileChange",value:function(e){if(e.target.files[0]){var a=e.target.files[0];this.setState((function(){return{image:a}})),this.setState({fileText:a.name})}}},{key:"render",value:function(){var e=this;return this.state.showUploadError&&this.state.showInputError?o.a.createElement("div",{className:"Alert"},o.a.createElement(P.a,{variant:"warning",onClose:function(){return e.setState({showUploadError:!1,showInputError:!1})},dismissible:!0},o.a.createElement("div",{className:"alertText"}," ",o.a.createElement("b",null,"NO INPUTS:")," Please use these forms to input an image caption, your name, and an image!"))):this.state.showUploadError?o.a.createElement("div",{className:"Alert"},o.a.createElement(P.a,{variant:"danger",onClose:function(){return e.setState({showUploadError:!1})},dismissible:!0},o.a.createElement("div",{className:"alertText"}," ",o.a.createElement("b",null,"NO IMAGE:")," Select an image first to upload."))):this.state.showServerError?o.a.createElement("div",{className:"Alert"},o.a.createElement(P.a,{variant:"warning",onClose:function(){return e.setState({showServerError:!1})},dismissible:!0},o.a.createElement("div",{className:"alertText"}," ",o.a.createElement("b",null,"DID NOT UPLOAD:")," Something went wrong with uploading the image to the server. This will be fixed soon!"))):this.state.showUploadSuccess?o.a.createElement("div",{className:"Alert"},o.a.createElement(P.a,{variant:"success",onClose:function(){return e.setState({showUploadSuccess:!1})},dismissible:!0}," ",o.a.createElement("b",null,"SUCCESSFUL UPLOAD: ")," Refresh to see your picture in the slide show :-)")):this.state.showInputError?o.a.createElement("div",{className:"Alert"},o.a.createElement(P.a,{variant:"danger",onClose:function(){return e.setState({showInputError:!1})},dismissible:!0},o.a.createElement("div",{className:"alertText"}," ",o.a.createElement("b",null,"NO TEXT:")," Please input a description/caption for your image, as well as your name/nickname."))):o.a.createElement("div",{className:"ButtonContainer"},o.a.createElement("div",{style:{paddingTop:"7vh",paddingBottom:"2vh",left:"30%",width:"40%",fontSize:"min(2.75vw,1.8vh)",position:"relative"}},o.a.createElement(N.a,null,o.a.createElement(U.a,null,o.a.createElement(y.a,null,o.a.createElement(N.a.Group,{onChange:this.handlePplChange,controlId:"formPerson"},o.a.createElement(N.a.Control,{placeholder:"Name / Alias"}))),o.a.createElement(y.a,null,o.a.createElement(N.a,{onChange:function(a){return e.handleFileChange(a)}},o.a.createElement(N.a.File,{label:this.state.fileText,lang:"en",custom:!0}))),o.a.createElement(y.a,null,o.a.createElement(I.a,{variant:"danger",onClick:this.handleUpload,block:!0},"Click Here To Upload")))),o.a.createElement(U.a,null,o.a.createElement(y.a,null,o.a.createElement("span",{className:"otherForm"},o.a.createElement(N.a.Group,{onChange:function(a){return e.handleCapChange(a)},controlId:"formCaption"},o.a.createElement(N.a.Control,{placeholder:"Image Description"})))))))}}]),t}(n.Component),k=t(36),A=t.n(k);var O=function(){return o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"SCS Image Share"," ",o.a.createElement("img",{src:A.a,style:{height:"15vh"},alt:""}))),o.a.createElement(f,null),o.a.createElement(T,null),o.a.createElement("div",{className:"footer"},o.a.createElement("a",{href:"https://github.com/lenghuang/cmu-imageshare"},"Made by Len Huang \xa9 March 2020")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.633c31f7.chunk.js.map